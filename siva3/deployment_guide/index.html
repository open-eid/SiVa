
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../deployment/">
      
      
        <link rel="next" href="../qa_strategy/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.15">
    
    
      
        <title>5.2 Deployment guide - SiVa 3.9 - Signature Validation Service Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../override.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#system-requirements" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SiVa 3.9 - Signature Validation Service Documentation" class="md-header__button md-logo" aria-label="SiVa 3.9 - Signature Validation Service Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SiVa 3.9 - Signature Validation Service Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5.2 Deployment guide
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/open-eid/SiVa" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SiVa 3.9 - Signature Validation Service Documentation" class="md-nav__button md-logo" aria-label="SiVa 3.9 - Signature Validation Service Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SiVa 3.9 - Signature Validation Service Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/open-eid/SiVa" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../version_info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VERSION HISTORY
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    INTRODUCTION
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../definitions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. DEFINITIONS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. BACKGROUND
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3. STRUCTURE & ACTIVITIES
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            3. STRUCTURE & ACTIVITIES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../structure_and_activities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1 Component model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2 Use cases
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. INTERFACES
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    5. DEPLOYMENT
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            5. DEPLOYMENT
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1 Deployment model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    5.2 Deployment guide
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    5.2 Deployment guide
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      System requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building" class="md-nav__link">
    <span class="md-ellipsis">
      Building
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-siva-webapps" class="md-nav__link">
    <span class="md-ellipsis">
      Building SiVa webapps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-starting-webapps-from-command-line" class="md-nav__link">
    <span class="md-ellipsis">
      OPTION 1 - starting webapps from command line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-running-webapps-as-systemd-services" class="md-nav__link">
    <span class="md-ellipsis">
      OPTION 2 - running webapps as systemd services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-deploy-webapps-as-war-files-tomcat-setup-for-legacy-systems" class="md-nav__link">
    <span class="md-ellipsis">
      OPTION 3 - deploy webapps as war files (Tomcat setup for legacy systems)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-set-war-deployed-siva-applicationproperties" class="md-nav__link">
    <span class="md-ellipsis">
      How-to set WAR deployed SiVa application.properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smoke-testing-your-deployed-system" class="md-nav__link">
    <span class="md-ellipsis">
      Smoke testing your deployed system
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Statistics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#health-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Health Endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heartbeat-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Heartbeat endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-information-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Version information endpoint
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-report-signature" class="md-nav__link">
    <span class="md-ellipsis">
      Validation Report Signature
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#siva-webapp-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Siva webapp parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demo-webapp-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Demo webapp parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    6. QUALITY ASSURANCE
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            6. QUALITY ASSURANCE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qa_strategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.1 QA Strategy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2 Test Plan
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. ROADMAP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    8. APPENDICES
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            8. APPENDICES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/validation_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 1 - Validation Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/test_cases.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 2 - Test Case Descriptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/known_issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 3 - Known Issues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    9. SIVA 2.0 (Deprecated)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            9. SIVA 2.0 (Deprecated)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/definitions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.1. DEFINITIONS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/background.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.2. BACKGROUND
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_3" >
        
          
          <label class="md-nav__link" for="__nav_11_3" id="__nav_11_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    9.3. STRUCTURE & ACTIVITIES
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_3">
            <span class="md-nav__icon md-icon"></span>
            9.3. STRUCTURE & ACTIVITIES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/structure_and_activities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.3.1 Component model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/use_cases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.3.2 Use cases
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.4. INTERFACES
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_5" >
        
          
          <label class="md-nav__link" for="__nav_11_5" id="__nav_11_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    9.5. DEPLOYMENT
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_5">
            <span class="md-nav__icon md-icon"></span>
            9.5. DEPLOYMENT
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.5.1 Deployment model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/systemintegrators_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.5.2 System integrator's guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_6" >
        
          
          <label class="md-nav__link" for="__nav_11_6" id="__nav_11_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    9.6. QUALITY ASSURANCE
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_6">
            <span class="md-nav__icon md-icon"></span>
            9.6. QUALITY ASSURANCE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/qa_strategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.6.1 QA Strategy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/test_plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.6.2 Test Plan
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.7. REFERENCES
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_8" >
        
          
          <label class="md-nav__link" for="__nav_11_8" id="__nav_11_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    9.8. APPENDICES
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_8">
            <span class="md-nav__icon md-icon"></span>
            9.8. APPENDICES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/appendix/validation_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 1 - Validation Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/appendix/test_cases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 2 - Test Case Descriptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/appendix/wsdl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 3 - WSDL/XSD of SOAP Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva2/appendix/known_issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 4 - Known Issues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    10. SIVA 1.1 (Deprecated)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            10. SIVA 1.1 (Deprecated)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/definitions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.1. DEFINITIONS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/background.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.2. BACKGROUND
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_3" >
        
          
          <label class="md-nav__link" for="__nav_12_3" id="__nav_12_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    10.3. STRUCTURE & ACTIVITIES
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_3">
            <span class="md-nav__icon md-icon"></span>
            10.3. STRUCTURE & ACTIVITIES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/v2/structure_and_activities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.3.1 Component model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/v2/use_cases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.3.2 Use cases
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/v2/interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.4. INTERFACES
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_5" >
        
          
          <label class="md-nav__link" for="__nav_12_5" id="__nav_12_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    10.5. DEPLOYMENT
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_5">
            <span class="md-nav__icon md-icon"></span>
            10.5. DEPLOYMENT
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/v2/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.5.1 Deployment model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/v2/systemintegrators_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.5.2 System integrator's guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_6" >
        
          
          <label class="md-nav__link" for="__nav_12_6" id="__nav_12_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    10.6. QUALITY ASSURANCE
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_6">
            <span class="md-nav__icon md-icon"></span>
            10.6. QUALITY ASSURANCE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/qa_strategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.6.1 QA Strategy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/test_plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.6.2 Test Plan
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.7. REFERENCES
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_8" >
        
          
          <label class="md-nav__link" for="__nav_12_8" id="__nav_12_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    10.8. APPENDICES
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_8">
            <span class="md-nav__icon md-icon"></span>
            10.8. APPENDICES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/appendix/validation_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 1 - Validation Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/appendix/test_cases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 2 - Test Case Descriptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/appendix/wsdl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 3 - WSDL of SOAP Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../siva/appendix/known_issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix 4 - Known Issues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      System requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building" class="md-nav__link">
    <span class="md-ellipsis">
      Building
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-siva-webapps" class="md-nav__link">
    <span class="md-ellipsis">
      Building SiVa webapps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-starting-webapps-from-command-line" class="md-nav__link">
    <span class="md-ellipsis">
      OPTION 1 - starting webapps from command line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-running-webapps-as-systemd-services" class="md-nav__link">
    <span class="md-ellipsis">
      OPTION 2 - running webapps as systemd services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-deploy-webapps-as-war-files-tomcat-setup-for-legacy-systems" class="md-nav__link">
    <span class="md-ellipsis">
      OPTION 3 - deploy webapps as war files (Tomcat setup for legacy systems)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-set-war-deployed-siva-applicationproperties" class="md-nav__link">
    <span class="md-ellipsis">
      How-to set WAR deployed SiVa application.properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smoke-testing-your-deployed-system" class="md-nav__link">
    <span class="md-ellipsis">
      Smoke testing your deployed system
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Statistics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#health-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Health Endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heartbeat-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Heartbeat endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-information-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Version information endpoint
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-report-signature" class="md-nav__link">
    <span class="md-ellipsis">
      Validation Report Signature
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#siva-webapp-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Siva webapp parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demo-webapp-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Demo webapp parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>5.2 Deployment guide</h1>

<p>The following guide is for system integrators who need to set-up, configure, manage and troubleshoot SiVa service.</p>
<h3 id="system-requirements">System requirements</h3>
<p>Following are the minimum requirements to build and deploy SiVa webapps as a service:</p>
<ul>
<li>Java 11 or above is supported</li>
<li>Git version control system version 1.8 or above is recommended</li>
<li>Minimum 2 GB of RAM. Recommended at least 4 GB of RAM</li>
<li>Minimum 1 processor core</li>
<li>Open internet connection</li>
<li>2GB of free disk space</li>
<li>Supported operating system is Ubuntu 16.04 LTS</li>
</ul>
<h2 id="building">Building</h2>
<h3 id="building-siva-webapps">Building SiVa webapps</h3>
<p>It is recommended to build the project with Maven Wrapper. Run following command in the projects main directory:</p>
<div class="codehilite"><pre><span></span><code>./mvnw<span class="w"> </span>clean<span class="w"> </span>install
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first time build can take up to <strong>45 minutes</strong> because of downloading the required dependencies, running vulnerability checks and unit tests.</p>
</div>
<p>To verify that SiVa project built successfully look for <code>BUILD SUCCESS</code> in build compilation output last lines.
The last lines of build output should look very similar to below image:</p>
<div class="codehilite"><pre><span></span><code>[INFO] Reactor Summary:
[INFO]
[INFO] SiVa Digitally signed documents validation service X.X.X SUCCESS [  2.089 s]
[INFO] validation-services-parent ......................... SUCCESS [  0.380 s]
[INFO] validation-commons ................................. SUCCESS [ 13.782 s]
[INFO] tsl-loader ......................................... SUCCESS [  9.372 s]
[INFO] Generic Validation Service ......................... SUCCESS [ 41.723 s]
[INFO] TimeStampToken Validation Service .................. SUCCESS [  8.400 s]
[INFO] Time-mark container Validation Service ............. SUCCESS [ 36.508 s]
[INFO] SiVa webapp and other core modules ................. SUCCESS [  0.374 s]
[INFO] siva-monitoring .................................... SUCCESS [ 11.982 s]
[INFO] siva-statistics .................................... SUCCESS [  9.816 s]
[INFO] SiVa validation service proxy ...................... SUCCESS [ 14.861 s]
[INFO] SiVa signature service ............................. SUCCESS [  7.801 s]
[INFO] siva-webapp ........................................ SUCCESS [ 42.451 s]
[INFO] SiVa Sample Web application ........................ SUCCESS [ 42.236 s]
[INFO] SiVa Web Service integration tests ................. SUCCESS [ 18.830 s]
[INFO] siva-distribution X.X.X ............................ SUCCESS [  5.763 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 04:46 min
[INFO] Finished at: 2020-07-03T14:22:02+03:00
[INFO] ------------------------------------------------------------------------
</code></pre></div>

<h2 id="deploying">Deploying</h2>
<h3 id="option-1-starting-webapps-from-command-line">OPTION 1 - starting webapps from command line</h3>
<p>SiVa project compiles <strong>2 fat executable JAR</strong> files that you can run after successfully building the
project by issuing below commands:</p>
<p><strong>First start the Siva webapp</strong></p>
<div class="codehilite"><pre><span></span><code>./siva-parent/siva-webapp/target/siva-webapp-X.X.X.jar
</code></pre></div>

<p>The SiVa webapp by default runs on port <strong>8080</strong>.
Easiest way to test out the deployment is to run SiVa demo application and use it for validation.</p>
<p><strong>Start the Demo webapp</strong></p>
<div class="codehilite"><pre><span></span><code>./siva-parent/siva-sample-application/target/siva-sample-application-X.X.X.jar
</code></pre></div>

<p>Now point Your browser to URL: <a href="http://localhost:9000">http://localhost:9000</a></p>
<h3 id="option-2-running-webapps-as-systemd-services">OPTION 2 - running webapps as systemd services</h3>
<p>Maven build generates executable JAR files. This means web container and all its dependencies are package inside
single JAR file. It makes a lot easier to deploy it into servers.</p>
<p>Easiest option to setup SiVa is as <code>systemd</code> service in Ubuntu servers.</p>
<p>For that we first need to create service file:</p>
<div class="codehilite"><pre><span></span><code>vim<span class="w"> </span>siva-webapp.service
</code></pre></div>

<p>Inside it, we need to paste below text. You need to change few things in service setup file.</p>
<ul>
<li>First you <strong>must not</strong> run service as <code>root</code>. So it's strongly recommended to change line <code>User=root</code></li>
<li>Second You can change Java JVM options by modifying the <code>JAVA_OPTS</code> inside the <code>siva-webapp.service</code> file.</li>
<li>Also, You can change the SiVa application configuration options by modifying <code>RUN_ARGS</code> section in file</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">siva-webapp</span>
<span class="na">After</span><span class="o">=</span><span class="s">syslog.target</span>

<span class="k">[Service]</span>
<span class="na">User</span><span class="o">=</span><span class="s">root</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/var/apps/siva-webapp.jar</span>
<span class="na">Environment</span><span class="o">=</span><span class="s">JAVA_OPTS=-Xmx320m RUN_ARGS=--server.port=80</span>
<span class="na">SuccessExitStatus</span><span class="o">=</span><span class="s">143</span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
</code></pre></div>

<p>Save and close the <code>siva-webapp.service</code> file.
Next we need to move <code>siva-webapp-X.X.X.jar</code> into newly created <code>/var/apps</code> directory and rename to
JAR file to <code>siva-webapp.jar</code>. match</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The copied JAR filename must match option <code>ExecStart</code> in  <code>siva-webapp.service</code> file</p>
</div>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>mkdir<span class="w"> </span>/var/apps
sudo<span class="w"> </span>cp<span class="w"> </span>siva-parent/siva-webapp/target/executable/siva-webapp-X.X.X.jar<span class="w"> </span>/var/apps/siva-webapp.jar
</code></pre></div>

<p>Next we need to copy the <code>siva-webapp.service</code> file into <code>/lib/systemd/system</code> directory.
Then we are ready to start the <code>siva-webapp</code> service.</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>cp<span class="w"> </span>siva-webapp.service<span class="w"> </span>/lib/systemd/system
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>siva-webapp
</code></pre></div>

<p>Final step of setting up the <code>siva-webapp</code> service is to verify that service started correctly by issuing below
command.</p>
<div class="codehilite"><pre><span></span><code>systemctl<span class="w"> </span>status<span class="w"> </span>siva-webapp
</code></pre></div>

<p>It should print out similar to below picture:</p>
<div class="codehilite"><pre><span></span><code><span class="err">●</span><span class="w"> </span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">disabled</span><span class="p">;</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">enabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Thu</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">21</span><span class="w"> </span><span class="mi">08</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">14</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="mi">2</span><span class="n">h</span><span class="w"> </span><span class="n">ago</span>
<span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">15965</span><span class="w"> </span><span class="p">(</span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span><span class="p">)</span>
<span class="w">    </span><span class="n">Tasks</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span>
<span class="w">   </span><span class="n">Memory</span><span class="p">:</span><span class="w"> </span><span class="mf">429.6</span><span class="n">M</span>
<span class="w">      </span><span class="n">CPU</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="nb">min</span><span class="w"> </span><span class="mf">5.721</span><span class="n">s</span>
<span class="w">   </span><span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">service</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">15965</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">stage</span><span class="o">/</span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span>
<span class="w">           </span><span class="err">└─</span><span class="mi">15982</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">java</span><span class="w"> </span><span class="o">-</span><span class="n">Dsun</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">URLClassPath</span><span class="o">.</span><span class="n">disableJarChecking</span><span class="o">=</span><span class="bp">true</span><span class="w"> </span><span class="o">-</span><span class="n">Xmx320m</span><span class="w"> </span><span class="o">-</span><span class="n">jar</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">stage</span><span class="o">/</span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span>

<span class="n">Jul</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">siva</span><span class="w"> </span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span><span class="p">[</span><span class="mi">15965</span><span class="p">]:</span><span class="w">         </span><span class="n">at</span><span class="w"> </span><span class="n">eu</span><span class="o">.</span><span class="n">europa</span><span class="o">.</span><span class="n">esig</span><span class="o">.</span><span class="n">dss</span><span class="o">.</span><span class="n">tsl</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">TSLParser</span><span class="o">.</span><span class="n">getTslModel</span><span class="p">(</span><span class="n">TSLParser</span><span class="o">.</span><span class="n">java</span><span class="p">:</span><span class="mi">143</span><span class="p">)</span>
<span class="n">Jul</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">siva</span><span class="w"> </span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span><span class="p">[</span><span class="mi">15965</span><span class="p">]:</span><span class="w">         </span><span class="n">at</span><span class="w"> </span><span class="n">eu</span><span class="o">.</span><span class="n">europa</span><span class="o">.</span><span class="n">esig</span><span class="o">.</span><span class="n">dss</span><span class="o">.</span><span class="n">tsl</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">TSLParser</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">TSLParser</span><span class="o">.</span><span class="n">java</span><span class="p">:</span><span class="mi">129</span><span class="p">)</span>
<span class="n">Jul</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">siva</span><span class="w"> </span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span><span class="p">[</span><span class="mi">15965</span><span class="p">]:</span><span class="w">         </span><span class="o">...</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">frames</span><span class="w"> </span><span class="n">omitted</span>
<span class="n">Jul</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">siva</span><span class="w"> </span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span><span class="p">[</span><span class="mi">15965</span><span class="p">]:</span><span class="w"> </span><span class="mf">20.07</span><span class="o">.</span><span class="mi">2016</span><span class="w"> </span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">01.450</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="p">[</span><span class="n">pool</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">thread</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">dss</span><span class="o">.</span><span class="n">tsl</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">TSLRepository</span><span class="o">.</span><span class="n">sync</span>
<span class="n">Jul</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">siva</span><span class="w"> </span><span class="n">siva</span><span class="o">-</span><span class="n">webapp</span><span class="o">.</span><span class="n">jar</span><span class="p">[</span><span class="mi">15965</span><span class="p">]:</span><span class="w"> </span><span class="mf">20.07</span><span class="o">.</span><span class="mi">2016</span><span class="w"> </span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">01.450</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="p">[</span><span class="n">pool</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">thread</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">dss</span><span class="o">.</span><span class="n">tsl</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">TSLRepository</span><span class="o">.</span><span class="n">sync</span>
</code></pre></div>

<h3 id="option-3-deploy-webapps-as-war-files-tomcat-setup-for-legacy-systems">OPTION 3  - deploy webapps as war files (Tomcat setup for legacy systems)</h3>
<blockquote>
<p><strong>NOTE 1</strong>: Each SiVa service <strong>must</strong> be deployed to separate instance of Tomcat to avoid Java JAR library version
conflicts.</p>
<p><strong>NOTE 2</strong>: To limit your webapp request size (this is set automatically when deploying service as jar) one needs to configure the container manually. For example, when using <a href="http://tomcat.apache.org/tomcat-8.0-doc/config/http.html">Tomcat 8</a> -
the http connector parameter <code>maxPostSize</code> should be configured with the desired limit.</p>
<p><strong>NOTE 3</strong>: The war file must be deployed to Tomcat ROOT.</p>
</blockquote>
<p>First we need to download Tomcat web servlet container as of the writing latest version available in version 8 branch is 8.5.24. We will download it with <code>wget</code></p>
<div class="codehilite"><pre><span></span><code>wget<span class="w"> </span>http://www-eu.apache.org/dist/tomcat/tomcat-8/v8.5.24/bin/apache-tomcat-8.5.24.tar.gz
</code></pre></div>

<p>Unpack it somewhere:</p>
<div class="codehilite"><pre><span></span><code>tar<span class="w"> </span>xf<span class="w"> </span>apache-tomcat-8.5.24.tar.gz
</code></pre></div>

<p>Now we should build the WAR file. We have created helper script with all the correct Maven parameters.</p>
<div class="codehilite"><pre><span></span><code>./war-build.sh
</code></pre></div>

<p>Final steps would be copying built WAR file into Tomcat <code>webapps</code> directory and starting the servlet container.</p>
<div class="codehilite"><pre><span></span><code>cp<span class="w"> </span>siva-parent/siva-webapp/target/siva-webapp-X.X.X.war<span class="w"> </span>apache-tomcat-8.5.24/webapps
./apache-tomcat-7.0.77/bin/catalina.sh<span class="w"> </span>run
</code></pre></div>

<blockquote>
<p><strong>IMPORTANT</strong> siva-webapp on startup creates <code>etc</code> directory where it copies the TSL validation certificates
<code>siva-keystore.jks</code>. Default location for this directory is application root or <code>$CATALINA_HOME</code>. To change
this default behavior you should set environment variable <code>DSS_DATA_FOLDER</code>. </p>
<p><strong>IMPORTANT</strong> When updating the siva-keystore.jks it is needed to delete the "temp" keystore from default/specified location. 
Deleting the "temp" keystore is also needed when upgrading your deployment to newer SIVA version!</p>
</blockquote>
<h3 id="how-to-set-war-deployed-siva-applicationproperties">How-to set WAR deployed SiVa <code>application.properties</code></h3>
<p>SiVa override properties can be set using <code>application.properties</code> file. The file can locate anywhere in the host system.
To make properties file accessible for SiVa you need to create or edit <code>setenv.sh</code> placed inside <code>bin</code> directory.</p>
<p>Contents of the <code>setenv.sh</code> file should look like:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">CATALINA_OPTS</span><span class="o">=</span><span class="s2">&quot;-Dspring.config.location=file:/path/to/application.properties&quot;</span>
</code></pre></div>

<h3 id="smoke-testing-your-deployed-system">Smoke testing your deployed system</h3>
<p><strong>Step 1</strong>. Install HTTPIE
<code>httpie</code> is more user-friendly version of <code>curl</code> and we will use to verify that SiVa was installed
and started correctly on our server.</p>
<p>If you have Python and its package manager <code>pip</code> installed. Then You can issue below command:</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>httpie
</code></pre></div>

<p><strong>Step 2</strong>. Download a sample JSON request file.</p>
<div class="codehilite"><pre><span></span><code>http<span class="w"> </span>--download<span class="w"> </span>https://raw.githubusercontent.com/open-eid/SiVa/develop/build-helpers/sample-requests/bdocPass.json
</code></pre></div>

<p><strong>Step 3</strong>. After successful download issue below command in same directory where you downloaded the file using
the command below.</p>
<div class="codehilite"><pre><span></span><code>http<span class="w"> </span>POST<span class="w"> </span>http://localhost:8080/validate<span class="w"> </span>&lt;<span class="w"> </span>bdocPass.json
</code></pre></div>

<p><strong>Step 4</strong>. Verify the output. Look for <code>signatureCount</code> and <code>validSignatureCount</code>, they <strong>must</strong> be equal.</p>
<h2 id="logging">Logging</h2>
<p>By default, logging works on the INFO level and logs are directed to the system console only. Logging functionality is handled by the SLF4J logging facade and on top of the Logback framework. As a result, logging can be configured via the standard Logback configuration file through Spring boot. Additional logging appenders can be added. Consult <a href="http://logback.qos.ch/documentation.html">logback documentation</a> for more details on log file structure.</p>
<p>For example, adding application.properties to classpath with the <strong>logging.config</strong> property</p>
<div class="codehilite"><pre><span></span><code>logging.config<span class="o">=</span>/path/to/logback.xml
</code></pre></div>

<h2 id="statistics">Statistics</h2>
<p>For every validation a statistical report is composed that contains the following data:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>stats</td>
<td>Object</td>
<td>Object containing statistic info</td>
</tr>
<tr>
<td>stats.type</td>
<td>String</td>
<td>Container type ( text value that identifies the container type) of the validated document: ASiC-E, ASIC-S, PAdES, DIGIDOC_XML, N/A</td>
</tr>
<tr>
<td>stats.sigType</td>
<td>String</td>
<td>Signature type in validated document: XAdES, CAdES, PAdES, N/A</td>
</tr>
<tr>
<td>stats.usrId</td>
<td>String</td>
<td>(Text data that contains the SiVa user identifier for reports (from the HTTP x-authenticated-user header) or N/A)</td>
</tr>
<tr>
<td>stats.dur</td>
<td>Number</td>
<td>The time it takes to process an incoming request - measured in milliseconds</td>
</tr>
<tr>
<td>stats.sigCt</td>
<td>Number</td>
<td>The value of the "signaturesCount" element in the validation report</td>
</tr>
<tr>
<td>stats.vSigCt</td>
<td>Number</td>
<td>The value of the "validSignaturesCount" element in the validation report</td>
</tr>
<tr>
<td>stats.sigRslt</td>
<td>Array</td>
<td>Array of signature statistic objects</td>
</tr>
<tr>
<td>stats.sigRslt[0]</td>
<td>Object</td>
<td>Object containing signature statistic info</td>
</tr>
<tr>
<td>stats.sigRslt[0].i</td>
<td>String</td>
<td>Value of signature indication field from the validation report</td>
</tr>
<tr>
<td>stats.sigRslt[0].si</td>
<td>String</td>
<td>Value of signature subindication field from the validation report. Element not present if not in validation report</td>
</tr>
<tr>
<td>stats.sigRslt[0].cc</td>
<td>String</td>
<td>Country code extracted from the signer cert subject field. The ISO-3166-1 alpha-2 country code that is associated with signature (the signing certificate or XX if the country cannot be determined.</td>
</tr>
<tr>
<td>stats.sigRslt[0].sf</td>
<td>String</td>
<td>Values of signatureFormat field from the validation report</td>
</tr>
</tbody>
</table>
<p>Example of statistic</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="s">&quot;stats&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PAdES&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;sigType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PAdES&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;usrId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sample_user1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;dur&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4021</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;sigCt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;vSigCt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;sigRslt&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">         </span><span class="p">{</span><span class="s">&quot;i&quot;</span><span class="p">:</span><span class="s">&quot;TOTAL-PASSED&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cc&quot;</span><span class="p">:</span><span class="s">&quot;EE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sf&quot;</span><span class="p">:</span><span class="s">&quot;PAdES_BASELINE_LT&quot;</span><span class="p">},</span>
<span class="w">         </span><span class="p">{</span><span class="s">&quot;i&quot;</span><span class="p">:</span><span class="s">&quot;INDETERMINATE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;si&quot;</span><span class="p">:</span><span class="s">&quot;NO_CERTIFICATE_CHAIN_FOUND&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cc&quot;</span><span class="p">:</span><span class="s">&quot;EE&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sf&quot;</span><span class="p">:</span><span class="s">&quot;PAdES_BASELINE_LT&quot;</span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>This information is sent to log feeds (at INFO level) which can be redirected to files or to a syslog feed.</p>
<h2 id="monitoring">Monitoring</h2>
<p>SiVa webapps provide endpoints for external monitoring tools to periodically check the generic service health status.</p>
<h3 id="health-endpoint">Health Endpoint</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this endpoint is not exposed by default.</p>
</div>
<p>The url for accessing JSON formatted health information with HTTP GET is <code>/monitoring/health</code> . See the <a href="../interfaces/#service-health-monitoring">Interfaces section</a> for response structure and details.</p>
<ul>
<li><strong>Exposing the health monitoring endpoint</strong></li>
</ul>
<p>To expose the endpoint, use the following configuration parameter:</p>
<div class="codehilite"><pre><span></span><code>management.endpoints.web.exposure.include<span class="o">=</span>health
</code></pre></div>

<ul>
<li><strong>External service health indicators</strong></li>
</ul>
<p>The endpoint is implemented as a customized Spring boot <a href="http://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-health">health endpoint</a>, which allows to add custom health indicators.</p>
<p>Demo webapp and Siva webapp include additional information about the health of their dependent services.
These links to dependent web services have been preconfigured. For example, the Demo webapp is preset to check whether the Siva webapp is accessible from the following url (parameter <code>siva.service.serviceHost</code> value)/monitoring/health.</p>
<h3 id="heartbeat-endpoint">Heartbeat endpoint</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this endpoint is not enabled nor exposed by default.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this endpoint requires the health endpoint to be enabled and exposed in order to function.</p>
</div>
<p>The url for accessing JSON formatted heartbeat information with HTTP GET is <code>/monitoring/heartbeat</code>. See the <a href="../interfaces/#simplified-health-monitoring">Interfaces section</a> for response structure and details.</p>
<ul>
<li><strong>Enabling and exposing the heartbeat monitoring endpoint</strong></li>
</ul>
<p>To enable and expose the endpoint, use the following configuration parameters:</p>
<div class="codehilite"><pre><span></span><code>management.endpoints.web.exposure.include<span class="o">=</span>health,heartbeat
management.endpoint.heartbeat.enabled<span class="o">=</span><span class="nb">true</span>
</code></pre></div>

<ul>
<li><strong>Simplified service health indicator</strong></li>
</ul>
<p>The endpoint is implemented by polling the health information directly from the underlying health endpoint implementation, but exposing just the aggregated overall service status, hiding everything else.</p>
<h3 id="version-information-endpoint">Version information endpoint</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that this endpoint is not enabled nor exposed by default.</p>
</div>
<p>The url for accessing JSON formatted version information with HTTP GET is <code>/monitoring/version</code>. See the <a href="../interfaces/#version-information">Interfaces section</a> for response structure and details.</p>
<ul>
<li><strong>Enabling and exposing the version information endpoint</strong></li>
</ul>
<p>To enable and expose the endpoint, use the following configuration parameters:</p>
<div class="codehilite"><pre><span></span><code>management.endpoints.web.exposure.include<span class="o">=</span>version
management.endpoint.version.enabled<span class="o">=</span><span class="nb">true</span>
</code></pre></div>

<h2 id="validation-report-signature">Validation Report Signature</h2>
<p>SiVa provides the ability to sign the validation report. The idea of supplementing the validation report with a validation report signature is to prove the authority's authenticity and integrity over the validation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Signing of validation report is disabled by default</p>
</div>
<p>To enable it, use the following configuration parameter:</p>
<div class="codehilite"><pre><span></span><code>siva.report.reportSignatureEnabled<span class="o">=</span><span class="nb">true</span>
</code></pre></div>

<p>When validation report signature is enabled, only detailed validation reports will be signed, simple reports will not be signed.
The validation report's digital signature is composed out of response's <code>validationReport</code> object. The target format of the signature is ASiC-E (signature level is configurable). The ASiC-E container contents are encoded into Base64 and put on the same level int the response as the validation report itself.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Enabling the validation report signing will affect the performance of the service.</p>
</div>
<p>Example structure of the response containing report signature:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;validationReport&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">...</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;validationReportSignature&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ZHNmYmhkZmdoZGcgZmRmMTM0NTM...&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p>Supported interfaces for signature creation:</p>
<ul>
<li><strong>PKCS#11</strong> - a platform-independent API for cryptographic tokens, such as hardware security modules (HSM) and smart cards</li>
<li><strong>PKCS#12</strong> - for files bundled with private key and certificate</li>
</ul>
<p>Report signature configuration parameters:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>siva.report.reportSignatureEnabled</strong></td>
<td>Enables signing of the validation report. Validation report will only be signed when requesting detailed report.  <ul><li>Default: <strong>false</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.signatureService.signatureLevel</strong></td>
<td>The level of the validation report signature. <br> <strong>Example values:</strong> <br> * XAdES_BASELINE_B <br> * XAdES_BASELINE_T <br> * XAdES_BASELINE_LT <br> * XAdES_BASELINE_LTA</td>
</tr>
<tr>
<td><strong>siva.signatureService.tspUrl</strong></td>
<td>URL of the timestamp provider. <br> Only needed when the configured signature level is at least XAdES_BASELINE_T</td>
</tr>
<tr>
<td><strong>siva.signatureService.ocspUrl</strong></td>
<td>URL of the OCSP provider. <br> Only needed when the configured signature level is at least XAdES_BASELINE_LT</td>
</tr>
<tr>
<td><strong>siva.signatureService.pkcs11.path</strong></td>
<td>path to PKCS#11 module (depends on your installed smart card or hardware token library, for example: /usr/local/lib/opensc-pkcs11.so)</td>
</tr>
<tr>
<td><strong>siva.signatureService.pkcs11.password</strong></td>
<td>pin/password of the smart card or hardware token</td>
</tr>
<tr>
<td><strong>siva.signatureService.pkcs11.slotIndex</strong></td>
<td>depends on the hardware token. E.g. Estonian Smart Card uses 2, USB eToken uses 0. <ul><li>Default: <strong>0</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.signatureService.pkcs12.path</strong></td>
<td>path to keystore file containing certificate and private key</td>
</tr>
<tr>
<td><strong>siva.signatureService.pkcs12.password</strong></td>
<td>password of the keystore file containing certificate and private key</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When configuring report signature, either PKCS#11 or PKCS#12 should be configured, no need to configure both.</p>
</div>
<hr />
<h2 id="configuration-parameters">Configuration parameters</h2>
<p>All SiVa webapps have been designed to run with predetermined defaults after building and without additional configuration.
However, all the properties can be overridden on the service or embedded web server level, if necessary.</p>
<p>By default, the service loads it's global configuration from the application.yml file that is packaged inside the jar file.
Default configuration parameters can be overridden by providing custom application.yml in the <a href="http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-application-property-files">following locations</a>, or using command line parameters or by using other <a href="http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">externalized configuration methods</a> methods.</p>
<p>For example, to configure the embedded Tomcat web server inside a fat jar to run on different port (default is 8080), change the <strong>server.port</strong> following property:</p>
<div class="codehilite"><pre><span></span><code>server.port<span class="o">=</span><span class="m">8080</span>
</code></pre></div>

<p>Or to increase or modify the default http request limit, override the <strong>siva.http.request.max-request-size-limit</strong> property:</p>
<div class="codehilite"><pre><span></span><code>siva.http.request.max-request-size-limit:<span class="w"> </span>15MB
</code></pre></div>

<p>See the reference list of all common <a href="http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html">application properties</a> provided by Spring boot</p>
<h3 id="siva-webapp-parameters">Siva webapp parameters</h3>
<ul>
<li>Updating TSL</li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>siva.tsl.loader.loadFromCache</strong></td>
<td>A boolean value that determines whether the TSL is loaded from disk cache instead of by downloading a new TSL in a predetermined interval.<br/><br/>Note that the cache files are by default stored in a system temporary folder (can be set with system property <code>java.io.tmpdir</code>; make sure the application has both read and write permissions in that folder).<ul><li>When set to <strong>false</strong>, the cache is refreshed periodically by SiVa in a predetermined interval specified by <code>siva.tsl.loader.schedulerCron</code> using <code>siva.tsl.loader.url</code>.</li><li>When set to <strong>true</strong>, SiVa uses existing cache as it's TSL. No direct polling for updates is performed, so all the files (LOTL and TSL files) must be present in system temporary directory. The cache files must have the same filenames as their URLs, but special characters need to be replaced with underscores. For example, the file downloaded from https://sr.riik.ee/tsl/estonian-tsl.xml must be named <code>https___sr_riik_ee_tsl_estonian_tsl_xml</code></li><li>Default: <strong>false</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.onlineCacheExpirationTime</strong></td>
<td>A string value in a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Duration.html#parse(java.lang.CharSequence)">format based on ISO-8601 duration format PnDTnHnMn.nS</a> that determines the expiration time of TSL disk cache in case <code>siva.tsl.loader.loadFromCache</code> is set to <code>false</code>. The default is 1 hour.<br/><br/>Note that the expiration time only determines, for each cached file, the minimum time that must have been passed since their last update before that file is considered expired and is susceptible to an update. The actual update is performed periodically by SiVa (specified by <code>siva.tsl.loader.schedulerCron</code>) or when the application is (re)started. <ul><li>Default: <strong>PT1H</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.url</strong></td>
<td>A url value that points to the external TSL <ul><li>Default: <strong>https://ec.europa.eu/tools/lotl/eu-lotl.xml</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.ojUrl</strong></td>
<td>A url value that points to the legal act in Official Journal of the European Union <ul><li>Default: <strong>https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=uriserv:OJ.C_.2019.276.01.0001.01.ENG</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.lotlRootSchemeInfoUri</strong></td>
<td>A url value that points to the European Unions' disclaimer regarding LOTL <ul><li>Default: <strong>https://ec.europa.eu/tools/lotl/eu-lotl-legalnotice.html</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.code</strong></td>
<td>Sets the LOTL code in DSS <ul><li>Default: <strong>EU</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.trustedTerritories</strong></td>
<td>Sets the trusted territories by countries <ul><li>Default: <strong>"AT", "BE", "BG", "CY", "CZ", "DE", "DK", "EE", "ES", "FI", "FR", "GR", "HU", "HR", "IE", "IS", "IT", "LT", "LU", "LV", "LI", "MT", "NO", "NL", "PL", "PT", "RO", "SE", "SI", "SK", "UK"</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.schedulerCron</strong></td>
<td>A string in a <a href="http://www.manpagez.com/man/5/crontab/">Crontab expression format</a> that defines the interval at which the TSL renewal process is started. The default is 03:00 every day (local time) <ul><li>Default: <strong>0 0 3 * * ?</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.sslTruststorePath</strong></td>
<td>Path to truststore containing trusted CA certificates used in HTTPS connection to retrieve member states TSLs <ul><li>Default: <strong>classpath:tsl-ssl-truststore.p12</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.sslTruststoreType</strong></td>
<td>Truststore type <ul><li>Default: <strong>PKCS12</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.sslTruststorePassword</strong></td>
<td>Truststore password <ul><li>Default: <strong>digidoc4j-password</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.tsl.loader.LotlPivotSupportEnabled</strong></td>
<td>A boolean value that determines, whether LOTL pivot mode should be used or not <ul><li>Default: <strong>true</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.keystore.type</strong></td>
<td>Keystore type <ul><li>Default: <strong>JKS</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.keystore.filename</strong></td>
<td>Keystore that contains public keys of trusted LOTL signers for LOTL signature validation<ul><li>Default: <strong>siva-keystore.jks</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.keystore.password</strong></td>
<td>Keystore password <ul><li>Default: <strong>siva-keystore-password</strong></li></ul></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the keystore file location can be overriden using environment variable <code>DSS_DATA_FOLDER</code>. By default the keystore file location, is expected to be on local filesystem in <code>etc</code> directory which is at the same level with the fat jar file (one is created, if no such directory exists).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When updating the siva-keystore.jks it is needed to delete the "temp" keystore from default/specified location. Deleting the "temp" keystore is also needed when upgrading your deployment to newer SIVA version!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TSL is currently used only by Generic and BDOC validators</p>
</div>
<ul>
<li>TimeMark validation - customizing policies</li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>siva.bdoc.digidoc4JConfigurationFile</strong></td>
<td>Path to Digidoc4j configuration override <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>siva.bdoc.signaturePolicy.defaultPolicy</strong></td>
<td>Selected default policy name <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.bdoc.signaturePolicy.policies[index].name</strong></td>
<td>Policy name <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.bdoc.signaturePolicy.policies[index].description</strong></td>
<td>Policy description <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.bdoc.signaturePolicy.policies[index].constraintPath</strong></td>
<td>Constraint XML file path for the policy. An absolute path or a reference to a resource on the classpath<ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.bdoc.signaturePolicy.policies[index].url</strong></td>
<td>Policy URL <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
</tbody>
</table>
<p>By default, the following configuration is used</p>
<div class="codehilite"><pre><span></span><code>siva.bdoc.signaturePolicy.policies[0].name=POLv3
siva.bdoc.signaturePolicy.policies[0].description=Policy for validating Electronic Signatures and Electronic Seals regardless of the legal type of the signature or seal (according to Regulation (EU) No 910/2014), i.e. the fact that the electronic signature or electronic seal is either Advanced electronic Signature (AdES), AdES supported by a Qualified Certificate (AdES/QC) or a Qualified electronic Signature (QES) does not change the total validation result of the signature.
siva.bdoc.signaturePolicy.policies[0].url=http://open-eid.github.io/SiVa/siva3/appendix/validation_policy/#POLv3
siva.bdoc.signaturePolicy.policies[0].constraintPath=bdoc_constraint_ades.xml

siva.bdoc.signaturePolicy.policies[1].name=POLv4
siva.bdoc.signaturePolicy.policies[1].description=Policy for validating Qualified Electronic Signatures and Qualified Electronic Seals (according to Regulation (EU) No 910/2014). I.e. signatures that have been recognized as Advanced electronic Signatures (AdES) and AdES supported by a Qualified Certificate (AdES/QC) do not produce a positive validation result.
siva.bdoc.signaturePolicy.policies[1].url=http://open-eid.github.io/SiVa/siva3/appendix/validation_policy/#POLv4
siva.bdoc.signaturePolicy.policies[1].constraintPath=bdoc_constraint_qes.xml
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Default policy configuration is lost when policy detail properties (name, description, url or constraintPath) are overridden or new custom policies added in custom configuration files (in this case, the existing default policies must be redefined in configuration files explicitly)</p>
</div>
<ul>
<li>Generic validation - customize validation policies</li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>siva.europe.signaturePolicy.defaultPolicy</strong></td>
<td>Selected default policy name <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.europe.signaturePolicy.policies[index].name</strong></td>
<td>Policy name <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.europe.signaturePolicy.policies[index].description</strong></td>
<td>Policy description <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.europe.signaturePolicy.policies[index].constraintPath</strong></td>
<td>Constraint XML file path for the policy. An absolute path or a reference to a resource on the classpath<ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.europe.signaturePolicy.policies[index].url</strong></td>
<td>Policy URL <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
</tbody>
</table>
<p>By default, the following configuration is used</p>
<div class="codehilite"><pre><span></span><code>siva.europe.signaturePolicy.policies[0].name=POLv3
siva.europe.signaturePolicy.policies[0].description=Policy for validating Electronic Signatures and Electronic Seals regardless of the legal type of the signature or seal (according to Regulation (EU) No 910/2014), i.e. the fact that the electronic signature or electronic seal is either Advanced electronic Signature (AdES), AdES supported by a Qualified Certificate (AdES/QC) or a Qualified electronic Signature (QES) does not change the total validation result of the signature.
siva.europe.signaturePolicy.policies[0].url=http://open-eid.github.io/SiVa/siva3/appendix/validation_policy/#POLv3
siva.europe.signaturePolicy.policies[0].constraintPath=generic_constraint_ades.xml

siva.europe.signaturePolicy.policies[1].name=POLv4
siva.europe.signaturePolicy.policies[1].description=Policy for validating Qualified Electronic Signatures and Qualified Electronic Seals (according to Regulation (EU) No 910/2014). I.e. signatures that have been recognized as Advanced electronic Signatures (AdES) and AdES supported by a Qualified Certificate (AdES/QC) do not produce a positive validation result.
siva.europe.signaturePolicy.policies[1].url=http://open-eid.github.io/SiVa/siva3/appendix/validation_policy/#POLv4
siva.europe.signaturePolicy.policies[1].constraintPath=generic_constraint_qes.xml
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Default policy configuration is lost when policy detail properties (name, description, url or constraintPath) are overridden or new custom policies added in custom configuration files (in this case, the existing default policies must be redefined in configuration files explicitly)</p>
</div>
<ul>
<li>Configure SiVa to request revocation status for T level signatures</li>
</ul>
<p>By default, T level signatures do not contain revocation data.
It is possible to configure SiVa to use OnlineOCSPSource in order to request revocation status during the validation process for T level signatures.</p>
<p>An example of configuring SiVa to request an OCSP response only for certificates issued by Latvian and Lithuanian service providers:</p>
<div class="codehilite"><pre><span></span><code>t-level-signature-filter.filter-type = ALLOWED_COUNTRIES
t-level-signature-filter.countries[0] = LV
t-level-signature-filter.countries[1] = LT
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If enabled, the revocation request is made for every signature level for given countries, not only T level signatures.</p>
</div>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>t-level-signature-filter.filter-type</strong></td>
<td>A string value that determines, which filter is being used. There are two available options: ALLOWED_COUNTRIES or NOT_ALLOWED_COUNTRIES <ul><li>When set to <strong>ALLOWED_COUNTRIES</strong> SiVa uses OnlineOCSPSource to request revocation status for the list of provided countries. If the list of countries is left empty, no OCSP requests are made</li><li>When set to <strong>NOT_ALLOWED_COUNTRIES</strong> SiVa uses OnlineOCSPSource to request revocation status for all the countries that are not on the list. If the list of countries is left empty, it makes an OCSP request for every country</li><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
<tr>
<td><strong>t-level-signature-filter.countries</strong></td>
<td>A list of countries to be provided to the filter. For example: EE, LV, BE <ul><li>Default: <strong>N/A</strong></li></ul></td>
</tr>
</tbody>
</table>
<h3 id="demo-webapp-parameters">Demo webapp parameters</h3>
<ul>
<li>Linking to SiVa webapp</li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>siva.service.serviceHost</strong></td>
<td>An HTTP URL link to the Siva webapp <ul><li>Default: <strong>http://localhost:8080</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.service.jsonServicePath</strong></td>
<td>Service path in Siva webapp to access the REST/JSON API<ul><li>Default: <strong>/validate</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.service.jsonDataFilesServicePath</strong></td>
<td>Data file service path in Siva webapp to access the REST/JSON API<ul><li>Default: <strong>/getDataFiles</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.service.trustStore</strong></td>
<td>Path to Siva webapp truststore on classpath <ul><li>Default: <strong>siva_server_truststore.p12</strong></li></ul></td>
</tr>
<tr>
<td><strong>siva.service.trustStorePassword</strong></td>
<td>Siva webapp truststore password <ul><li>Default: <strong>password</strong></li></ul></td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>